{% extends 'dashboard-layout.html' %} {% block header %}
<h1>{% block title %}Edit Article{% endblock %}</h1>
{% endblock %} {% block content %}

<section class="section_dashboard">
    <div class="title-wrapper">
        <h2>Edit Article</h2>
    </div>

    <div class="content-wrapper">
        <form method="post" class="form-content" id="edit_article">
            <div class="field-wrapper">
                <label for="title">Title</label>
                <input type="text" id="title" name="title" class="input-field" value="{{article['title']}}" />
                <span class="error-message" id="title-error-message"></span>
            </div>
            <div class="field-wrapper">
                <label for="doi">DOI</label>
                <input type="text" id="doi" name="doi" class="input-field" value="{{article['doi']}}" />
                <span class="error-message" id="doi-error-message"></span>
            </div>
            <div class="field-wrapper">
                <label for="isFeatured">Featured</label>
                <input type="checkbox" id="isFeatured" name="isFeatured" class="input-field" {% if
                    article['isFeatured']==True%} checked {%endif%} />
                <span class="error-message" id="featured-error-message"></span>
            </div>
            <div class="field-wrapper">
                <label for="authors">Authors</label>
                <div class="grid-col-2">
                    {% for index in range(article['creators']|length) %}
                    {% set author = article['creators'][index] %}
                    <div>
                        <div class="field-wrapper">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="creators[{{ index }}][name]" class="input-field"
                                value="{{ author['name'] }}" />
                            <span class="error-message" id="name-error-message"></span>
                        </div>
                        <div class="field-wrapper">
                            <label for="orcid">ORCID</label>
                            <input type="text" id="orcid" name="creators[{{ index }}][orcid]" class="input-field"
                                value="{{ author['orcid'] }}" />
                            <span class="error-message" id="orcid"></span>
                        </div>
                    </div>
                    {% endfor %}

                </div>
            </div>

            <div class="field-wrapper">
                <label for="abstract">Abstract</label>
                <textarea id="abstract" name="abstract" class="input-field">{{article['description']}}</textarea>
            </div>
            <div class="field-wrapper">
                <label for="fulltext">Full Text</label>
                <textarea id="content" name="content" class="input-field">{{article['content']}}</textarea>
            </div>
            <div class="field-wrapper">
                <label for="thumbnail_image">Thumbnail Image</label>
                <div class="input-file-wrapper">
                    <input type="file" id="thumbnail" name="thumbnail" class="input-file"
                        accept="image/jpg,image/png,image/jpeg" />
                    <input type="hidden" id="thumbnail_image" name="thumbnail_image" class="input-file"
                        value="{{article['thumbnail_image']}}" />
                    <div class="file-input">
                        <div class="svg-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none">
                                <path
                                    d="M22 14L19.061 11.8839C17.5338 10.7843 15.4467 10.898 14.0479 12.1569L9.95209 15.8431C8.55331 17.102 6.4662 17.2157 4.93901 16.1161L2 14M6 22H18C20.2091 22 22 20.2091 22 18V6C22 3.79086 20.2091 2 18 2H6C3.79086 2 2 3.79086 2 6V18C2 20.2091 3.79086 22 6 22ZM11 8.5C11 9.88071 9.88071 11 8.5 11C7.11929 11 6 9.88071 6 8.5C6 7.11929 7.11929 6 8.5 6C9.88071 6 11 7.11929 11 8.5Z"
                                    stroke="#28303F" stroke-width="1.5" stroke-linecap="round" />
                            </svg>
                        </div>
                        <span>Select Thumbnail</span>
                    </div>
                    <div class="preview show" id="preview-thumbnail">
                        <figure>
                            <div class="close-image" id="close-thumbnail">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none">
                                    <path d="M16.2427 7.75738L7.75739 16.2427M16.2427 16.2426L7.75739 7.75732"
                                        stroke="#28303F" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                            <img src="{{article['thumbnail_image']}}" id="image-thumbnail" alt="Article Thumbnail"
                                aria-describedby="Article Thumbnail" width="500" height="500" />
                        </figure>

                    </div>
                </div>
                <span class="error-message" id="thumbnail-error-message"></span>
            </div>
            <div class="field-wrapper">
                <label for="pdf">PDF</label>
                <div class="input-file-wrapper">
                    <input type="file" id="file" name="file" class="input-file" accept="application/pdf" />
                    <input type="hidden" id="file_view" name="file_view" class="input-file"
                        value="{{article['file_view']}}" />
                    <div class="file-input">
                        <div class="svg-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none">
                                <path
                                    d="M8 7H12M8 11H16M8 15H16M5 2H19C20.1046 2 21 2.89543 21 4V19.1543C21 20.5396 19.6259 21.5053 18.3226 21.0361L16.7608 20.4739C16.2728 20.2982 15.7356 20.319 15.2626 20.5318L12.8207 21.6307C12.2988 21.8655 11.7012 21.8655 11.1793 21.6307L8.73737 20.5318C8.26439 20.319 7.72721 20.2982 7.2392 20.4739L5.67744 21.0361C4.37412 21.5053 3 20.5396 3 19.1543V4C3 2.89543 3.89543 2 5 2Z"
                                    stroke="#28303F" stroke-width="1.5" stroke-linecap="round" />
                            </svg>
                        </div>
                        <span id="fileName">Select PDF</span>

                    </div>
                </div>
                <span class="error-message" id="file-error-message"></span>
            </div>
            <div class="field-wrapper">
                <button type="submit" aria-pressed="true">
                    <span>Save</span>
                </button>
                <span class="error-message" id="global-error-message"></span>
            </div>
        </form>
    </div>

</section>

<script src="{{ url_for('static', filename='javascripts/validation/validation.js') }}"></script>

{% endblock %}